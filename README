+-----------------------------------------+
| Installation guide for the toc compiler |
+-----------------------------------------+

Check ./toc/src/ for the source of the toc compiler.

The toc compiler conforms to ISO/IEC 2899:2011. However, it depends on certain implementation guarantees; for example, during translation, it is assumed that a preprocessing directive of the form
# include "q-char-sequence" new-line
searches for the named source file the way it is defined in SUSv4-2018 4.13 (Pathname resolution).

This version of toc can only geterate output that are compatible with nightVM.

Toc is most likely NOT strictly conforming, because chances are, certain minimum implementation limits are exceeded (though I have not verified that yet).

Toc tries to depend on as less implementation-defined stuff as possible. If you have a C11 implementation, it will very likely be able to translate the source files.

You must have the source of nightVM present.

In ./toc/src/nvm_paths.h, set the header-name following the identifier TOC_NVM_IMPLEMENTATION_H to denote the source file implementation.h as defined in nightVM. Same goes for TOC_NVM_OPCODES_H and TOC_NVM_ALLOC_H, which must point denote the source files opcodes.h and alloc.h respectively.

In ./toc/src/toc.c (main), set the pointer to char designated by the identifier stdlib_pathname to point to a string that denotes the output generated by translating the implementation of the standard library, such that the aforementioned output can be opened with fopen(stdlib_pathname, "rb").

In ./toc/src/resolve_imports.c (resolve_imports), set the pointer to char designated by the identifier file_name -- for each header provided by Chlore's standard library -- to denote the respective header files defined by said standard library (the files suffixed with .chlore in ./lib/src/), such that those files can be opened with fopen(file_name, "r").

After you have made the appropriate changes, just translate the following source files: ./toc/src/toc.c, ./toc/src/clean_up_routines.c, ./toc/src/code_gen.c, ./toc/src/resolve_imports.c, ./toc/src/lexer.c, ./toc/src/parser.c, ./toc/src/tables.c, ./toc/src/verify.c, ./toc/src/write_error.c and ./toc/src/buf_ops.c, and link them.

+------------------------------------------------------------+
| Getting the implementation of the standard library working |
+------------------------------------------------------------+

NOTE: The standard library is still highly work-in-progress.

Check ./lib/src/ for the source of the implementation of the standard library. ./lib/src/libchlore.c can be translated to generate a library.

As of now, it conforms to the ISO/IEC 2899:2011 standard with the assumption that the system interfaces provided by SUSv4-2018 are available, and during translation, a preprocessing directive of the form as mentioned in the intallation guide for the toc compiler, searches for the named source file the way it is defined in SUSv4-2018 4.13 (Pathname resolution).
